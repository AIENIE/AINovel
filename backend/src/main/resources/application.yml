spring:
  mvc:
    servlet:
      path: /api
  datasource:
    url: ${DB_URL:jdbc:mysql://${MYSQL_HOST:127.0.0.1}:${MYSQL_PORT:3308}/${MYSQL_DB:ainovel}?createDatabaseIfNotExist=true&useUnicode=true&characterEncoding=UTF-8&serverTimezone=UTC&allowPublicKeyRetrieval=true&useSSL=false}
    username: ${DB_USERNAME:${MYSQL_USER:ainovel}}
    password: ${DB_PASSWORD:${MYSQL_PASSWORD:ainovelpwd}}
  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        format_sql: true
    open-in-view: false
  data:
    redis:
      host: ${REDIS_HOST:127.0.0.1}
      port: ${REDIS_PORT:6381}
      password: ${REDIS_PASSWORD:}
  cache:
    type: redis
    redis:
      key-prefix: ${REDIS_KEY_PREFIX:aienie:ainovel:}
      use-key-prefix: true
  mail:
    host: ${SMTP_HOST:}
    port: ${SMTP_PORT:587}
    username: ${SMTP_USERNAME:}
    password: ${SMTP_PASSWORD:}
    properties:
      mail.smtp.auth: true
      mail.smtp.starttls.enable: true
  servlet:
    multipart:
      max-file-size: 20MB
      max-request-size: 20MB

server:
  port: ${PORT:10011}

app:
  jwt:
    secret: ${JWT_SECRET:super-secret-change-me-1234567890abcdef-super-secret-change-me-1234567890}
    expiration-minutes: 120
  ai:
    model: ${AI_MODEL:gpt-4o}
    base-url: ${AI_BASE_URL:https://api.openai.com/v1}
    api-key: ${AI_API_KEY:}
  external:
    project-key: ${EXTERNAL_PROJECT_KEY:ainovel}
    timeout-ms: ${EXTERNAL_TIMEOUT_MS:2500}
    discovery:
      enabled: ${CONSUL_ENABLED:true}
      scheme: ${CONSUL_SCHEME:http}
      host: ${CONSUL_HOST:127.0.0.1}
      port: ${CONSUL_PORT:8502}
      datacenter: ${CONSUL_DATACENTER:}
      cache-seconds: ${CONSUL_CACHE_SECONDS:30}
    userservice-http:
      service-name: ${USER_HTTP_SERVICE_NAME:aienie-userservice-http}
      fallback: ${USER_HTTP_ADDR:http://127.0.0.1:10000}
    aiservice-grpc:
      service-name: ${AI_GRPC_SERVICE_NAME:aienie-aiservice-grpc}
      fallback: ${AI_GRPC_ADDR:static://127.0.0.1:10011}
    payservice-grpc:
      service-name: ${PAY_GRPC_SERVICE_NAME:aienie-payservice-grpc}
      fallback: ${PAY_GRPC_ADDR:static://127.0.0.1:20021}

sso:
  callback-origin: ${SSO_CALLBACK_ORIGIN:}
  session-validation:
    enabled: ${SSO_SESSION_VALIDATION_ENABLED:true}
    timeout-ms: ${USER_SESSION_GRPC_TIMEOUT_MS:2000}
    grpc-fallback-address: ${USER_GRPC_ADDR:static://127.0.0.1:10001}
    consul:
      enabled: ${CONSUL_ENABLED:true}
      scheme: ${CONSUL_SCHEME:http}
      host: ${CONSUL_HOST:127.0.0.1}
      port: ${CONSUL_PORT:8502}
      service-name: ${USER_GRPC_SERVICE_NAME:aienie-userservice-grpc}
      datacenter: ${CONSUL_DATACENTER:}
      tag: ${USER_GRPC_SERVICE_TAG:}
      cache-seconds: ${CONSUL_CACHE_SECONDS:30}

qdrant:
  host: ${QDRANT_HOST:http://127.0.0.1}
  http-port: ${QDRANT_PORT:6335}
  enabled: ${QDRANT_ENABLED:true}
